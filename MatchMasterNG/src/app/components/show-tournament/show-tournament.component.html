<div class = "wrapper">
    <div class = "tournament-info">
        <button mat-icon-button *ngIf = "isCreator()" (click) = "isEditing = true" class = "edit-btn" matTooltip = "Edit Tournament" [matTooltipShowDelay] = "700" [matTooltipHideDelay] = "300"><mat-icon>edit</mat-icon></button>
        <h1 class = "title header">{{tournament.title}}</h1>
        <p class = "host header">Hosted by <a class = "creator-link" (click) = "goToProfile(tournament.creatorId)">{{creatorUsername}}</a></p>

        <mat-accordion class = "participants">
            <mat-expansion-panel class = "full-panel" hideToggle>
                <mat-expansion-panel-header>
                    <mat-panel-title class = "panel-header">
                        Tournament Participants
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class = "center">
                    <button mat-icon-button *ngIf = "!isParticipating()" class = "add" matTooltip = "Join Tournament" [matTooltipShowDelay] = "700" [matTooltipHideDelay] = "300" (click) = "joinTournament()"><mat-icon>person_add_alt_1</mat-icon></button>
                    <button mat-icon-button *ngIf = "isParticipating()" class = "remove" matTooltip = "Leave Tournament" [matTooltipShowDelay] = "700" [matTooltipHideDelay] = "300" (click) = "leaveTournament()"><mat-icon>person_remove</mat-icon></button>
                    <app-participants [participantsList] = "participants"></app-participants>
                </div>
            </mat-expansion-panel>
        </mat-accordion>
    </div>

    <div class = "center">
        <button mat-icon-button class = "add btn-icons" *ngIf = "isCreator()" (click) = "addStartingMatch()"><mat-icon>add_box</mat-icon></button>
    </div>

    <div class = "matches-space">
        <div class = "levels" *ngFor = "let level of winnersSide | keyvalue">            
            <div class = "match-box" *ngFor = "let match of level.value; let i = index;">
                <button mat-icon-button *ngIf = "isCreator() && isEditing" class = "remove btn-icons" matTooltip = "Delete Match"><mat-icon>remove</mat-icon></button>
                <app-match class = "match" (click) = "createLink(match.matchId!)" 
                    [ngClass] = "{'linking': matchLinking != 0 && matchLinking != match.matchId && !editingMatch.includes(match),'active' : isShiftPressed}" 
                    (deleteMatchEvent) = "getMatches()" 
                    (editEvent) = "editMatch($event)" 
                    (cancelEditEvent) = "stopEdit($event)" 
                    [match] = "match" 
                    [creatorId] = "tournament.creatorId" 
                    [tournamentId]= "tournamentId" 
                    [matchLevel] = "level.key" 
                    [matchIndex] = "i" 
                    [tournamentParticipants] = "participants" 
                    [isEditing] = "editingMatch.includes(match) || match.matchId == undefined">
                </app-match>
                <button mat-icon-button *ngIf = "(isCreator() && !editingMatch.includes(match)) && match.matchId != undefined && matchLinking == 0" class = "add btn-icons" (click) = "addLink(match.matchId)"><mat-icon>add_link</mat-icon></button>
            </div>                
        </div>
    </div>
    <div class = "matches-space">
        <div class = "levels" *ngFor = "let level of losersSide | keyvalue">            
            <div class = "match-box" *ngFor = "let match of level.value; let i = index;">
                <button mat-icon-button *ngIf = "isCreator() && isEditing" class = "remove btn-icons" matTooltip = "Delete Match"><mat-icon>remove</mat-icon></button>
                <app-match class = "match" (click) = "createLink(match.matchId!)" 
                    [ngClass] = "{'linking': matchLinking != 0 && matchLinking != match.matchId && !editingMatch.includes(match),'active' : isShiftPressed}" 
                    (deleteMatchEvent) = "getMatches()" 
                    (editEvent) = "editMatch($event)" 
                    (cancelEditEvent) = "stopEdit($event)" 
                    [match] = "match" 
                    [creatorId] = "tournament.creatorId" 
                    [tournamentId]= "tournamentId" 
                    [matchLevel] = "level.key" 
                    [matchIndex] = "i" 
                    [tournamentParticipants] = "participants" 
                    [isEditing] = "editingMatch.includes(match) || match.matchId == undefined">
                </app-match>
                <button mat-icon-button *ngIf = "(isCreator() && !editingMatch.includes(match)) && match.matchId != undefined && matchLinking == 0" class = "add btn-icons" (click) = "addLink(match.matchId)"><mat-icon>add_link</mat-icon></button>
            </div>                
        </div>
    </div>
</div>